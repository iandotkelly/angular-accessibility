"use strict";!function(){var a=angular.module("angular-accessibility",[]);a.directive("accessibleForm",function(a){return{retrict:"A",link:function(b,c,d){if(!d.name)return void a.error("accessibleForm must have a name attribute");var e=b[d.name];b.focusFirst=function(){for(var a in e)if(e.hasOwnProperty(a)&&0!==a.indexOf("$")){var b=e[a];if(b.$invalid)return b.focus&&b.focus(),!0}return!1},c.on("submit",function(a){b.focusFirst()&&a.preventDefault()})}}}),a.directive("aCheckbox",function(a,b){return{restrict:"E",requires:"^accessibleForm",template:['<fieldset class="form-group">','<div class="sr-only"></div>','<label class="col-sm-3 control-label"></label>','<div class="col-sm-7">','<input type="checkbox" class="form-control"></input>',"</div>","</fieldset>"].join(""),link:function(a,c,d){var e,f,g,h,i,j;h=c.children().eq(0),i=h.children(),f=i.eq(0),e=i.eq(1),g=i.eq(2).children().eq(0),j=d.id+"-checkbox",f.attr("id",j+"-help"),f.text(d.help),e.attr("for",j),e.text(d.label),g.attr("id",j),g.attr("aria-describedby",j+"-help"),g.attr("ng-model",d["ng-model"]),c.replaceWith(h),b(h)(a)}}}),a.directive("aChecklist",function(a){return{restrict:"E",requires:"^accessibleForm",template:['<fieldset class="form-group">','<legend class="col-sm-3 control-label horizontal"></legend>','<div class="col-sm-7">','<div class="checkbox">',"<label>",'<input type="checkbox"></input>',"</label>","</div></div>","</fieldset>"].join(""),link:function(b,c,d){var e,f,g,h,i,j;i=c.children("fieldset"),e=i.children("legend"),g=i.find("div.checkbox"),f=g.children("label"),h=f.children("input");for(j in d.$attr)if(d.$attr.hasOwnProperty(j))switch(j){case"legend":e.text(d.legend);break;case"label":f.prepend("{{"+d.label+"}}");break;case"repeat":g.attr("ng-repeat",d.repeat);break;case"modelArray":h.attr("checklist-model",d.modelArray);break;case"modelValue":h.attr("checklist-value",d.modelValue);break;default:h.attr(d.$attr[j],d[j])}c.replaceWith(i),a(i)(b)}}}),a.directive("aInput",function(a){return{restrict:"E",requires:"^accessibleForm",template:['<fieldset class="form-group">','<div class="sr-only"></div>','<div class="col-sm-7 col-sm-offset-3"></div>','<label class="col-sm-3 control-label"></label>','<div class="col-sm-7">','<input blur-focus class="form-control"></input>',"</div>","</fieldset>"].join(""),link:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o;j=c.children().eq(0),l=j.children(),f=l.eq(0),g=l.eq(1),e=l.eq(2),h=l.eq(3).children().eq(0);for(k in d.$attr)if(d.$attr.hasOwnProperty(k))switch(m=d.$attr[k],k){case"id":o=d.id+"-input",f.attr("id",o+"-help"),g.attr("id",o+"-error"),h.attr("id",o),e.attr("for",o);break;case"help":f.text(d[k]);break;case"error":g.text(d[k]);break;case"label":e.text(d[k]);break;case"required":h.attr("required","true"),h.attr("aria-required","true");break;default:h.attr(m,d[k])}n=c.closest("form").attr("name"),i=n+"."+h.attr("name"),j.attr("ng-class","{'has-error': "+i+".failsValidation()}"),g.attr("ng-show",i+".failsValidation()"),h.attr("aria-invalid","{{"+i+".failsValidation()}}"),h.attr("aria-describedby",f.attr("id")+" {{"+i+".validationId()}}"),h.attr("error-id",g.attr("id")),c.replaceWith(j),a(j)(b)}}}),a.directive("aSelect",function(a){return{restrict:"E",requires:"^accessibleForm",template:['<fieldset class="form-group">','<div class="sr-only"></div>','<div class="col-sm-7 col-sm-offset-3"></div>','<label class="col-sm-3 control-label"></label>','<div class="col-sm-7">','<select blur-focus class="form-control"></input>',"</div>","</fieldset>"].join(""),link:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o;j=c.children().eq(0),l=j.children(),f=l.eq(0),g=l.eq(1),e=l.eq(2),h=l.eq(3).children().eq(0);for(k in d.$attr)if(d.$attr.hasOwnProperty(k))switch(m=d.$attr[k],k){case"id":o=d.id+"-input",f.attr("id",o+"-help"),g.attr("id",o+"-error"),h.attr("id",o),e.attr("for",o);break;case"help":f.text(d[k]);break;case"error":g.text(d[k]);break;case"label":e.text(d[k]);break;case"required":h.attr("required","true"),h.attr("aria-required","true");break;default:h.attr(m,d[k])}n=c.closest("form").attr("name"),i=n+"."+h.attr("name"),j.attr("ng-class","{'has-error': "+i+".failsValidation()}"),g.attr("ng-show",i+".failsValidation()"),h.attr("aria-invalid","{{"+i+".failsValidation()}}"),h.attr("aria-describedby",f.attr("id")+" {{"+i+".validationId()}}"),h.attr("error-id",g.attr("id")),c.replaceWith(j),a(j)(b)}}}),a.directive("blurFocus",function(a){return{require:"?ngModel",link:function(b,c,d,e){a.log("wohoo"),a.log(e),e&&"checkbox"!==c.attr("type")&&(e.focus=function(){c.focus()},e.failsValidation=function(){return!!e.hasVisited&&!!e.$invalid},e.validationId=function(){return e.failsValidation()?c.attr("error-id"):void 0},c.on("focus",function(){c.addClass("has-focus"),b.$apply(function(){e.hasFocus=!0})}),c.on("blur",function(){a.log("blur"),c.removeClass("has-focus"),c.addClass("has-visited"),b.$apply(function(){e.hasFocus=!1,e.hasVisited=!0})}),c.closest("form").on("submit",function(){c.addClass("has-visited"),b.$apply(function(){e.hasFocus=!1,e.hasVisited=!0})}))}}})}();